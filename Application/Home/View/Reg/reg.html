<!DOCTYPE html>
<html>

<head lang="ch">
    <meta charset="UTF-8">
    <title>注册运动汇账号</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <link href="/Home/css/style.css" rel="stylesheet">
</head>

<body id="login">
    <div id="logo-wrap">
        <div id="logo" class="center-1000">
            <div class="left">
                <div id="logo_img" class="left">
                    <a href="/"><img src="/Home/img/logo.png" class="left" width="137" height="57" />
                    </a>
                </div>
                <div class="left" id="title">
                    <div>登录运动人生帐号</div>
                </div>
                <div class="clr"></div>
            </div>
            <div id="no-count" class="right"> <span>没有运动人生帐号？</span> <a href="{:U('login/login','','html')}" class="bg-blue">登陆</a> </div>
            <div class="clr"></div>
        </div>
    </div>
    <div id="login-wrap">
        <div id="login-bg-top"></div>
        <div id="login-bg-bottom"></div>
        <div id="login-bg-content">
            <div id="signup_header">
                <ul>
                	<li class="left cur"><a href="#signup_phone"><i class="icon icon--phone"></i>手机注册</a>
                    </li>
                    <li class="left"><a href="#signup_email"><i class="icon icon--email"></i>邮箱注册</a>
                    </li>
                    <div class="clr"></div>
                </ul>
            </div>
            <form id="signup_email" class="signup_form none" action="" method="POST">
                <span style="display:none">
      <input type="hidden" name="token" value="">
      </span>
                <div class="form-field form-field--email form-field--error">
                    <label>邮箱</label>
                    <input type="text" name="email" class="f-text J-email">
                    <span class="J-unitive-tip unitive-tip" hidden="hidden">注册成功后，全美团通用</span> <span class="inline-tip"><i class="tip-status tip-status--opinfo"></i>请填写邮箱地址</span> </div>
                <div class="form-field form-field--uname">
                    <label>用户名</label>
                    <input type="text" name="username" class="f-text J-uname">
                    <span class="inline-tip"><i class="tip-status"></i>4-16字符，不能以数字开头, 一个汉字为两个字符</span> </div>
                <div class="form-field form-field--pwd">
                    <div class="pw-strength">
                        <!--div class="pw-strength__bar pw-strength__bar--weak" id="J-pw-strength__bar"></div-->
                        <div class="pw-strength__bar pw-strength__bar--normal" id="J-pw-strength__bar"></div>
                        <!--div class="pw-strength__bar pw-strength__bar--strong" id="J-pw-strength__bar"></div-->
                        <div class="pw-strength__letter"> <span class="pw-strength__label">弱</span> <span class="pw-strength__label">中</span> <span class="pw-strength__label pw-strength__label--noborder">强</span> </div>
                    </div>
                    <label>创建密码</label>
                    <input type="password" name="password" class="f-text J-pwd">
                    <span class="inline-tip"><i class="tip-status tip-status--success"></i></span> </div>
                <div class="form-field form-field--pwd2">
                    <label>确认密码</label>
                    <input type="password" name="password2" class="f-text J-pwd2">
                </div>
                <div class="form-field form-field--vcode">
                    <label>验证码</label>
                    <input type="text" id="captcha" class="f-text J-captcha" name="captcha" autocomplete="off">
                    <img id="signup-signup-captcha-img-img" height="34px" width="60px" class="signup-captcha-img J-captcha-refresh" src=""> <a tabindex="-1" class="J-captcha-refresh captcha-refresh inline-link" href="javascript:void(0)">看不清楚？换一张</a> </div>
                <div class="form-field">
                    <input type="submit" class="btn" value="同意以下协议并注册">
                </div>
                <div class="field-group"> <a class="f1" href="" target="_blank">《用户协议》</a> </div>
            </form>
            <form id="signup_phone" class="signup_form" action="{:U('Reg/doReg')}" method="POST">
                <span style="display:none">
      				<input type="hidden" name="token" value="">
      			</span>
                <div class="form-field form-field--mobile form-field--error">
                    <label>手机号</label>
                    <input type="text" name="mobile" id="mobile" class="f-text J-mobile">
                    <span class="J-unitive-tip unitive-tip" hidden="hidden" style="display: none;">注册成功后，全网通用</span> <span class="inline-tip"><i class="tip-status tip-status--opinfo"></i>请输入您的手机号码</span>
                </div>
                <div class="form-field form-field--vbtn">
                    <div class="J-captcha captcha-wrapper">
                        <input type="button" class="btn-normal btn-mini verify-btn J-verify-btn" id="messages_status" status="0" onclick="get_code(this);" value="免费获取短信动态码">
                        <span class="f1 verify-tip" id="J-verify-tip" s="120"></span> </div>
                </div>
                <div class="form-field form-field--sms form-field--error">
                    <label>短信动态码</label>
                    <input type="text" name="verifycode" class="f-text J-sms">
                    <span class="inline-tip"><i class="tip-status tip-status--opinfo"></i>请输入短信动态码</span>
                </div>
                <div class="form-field form-field--pwd">
                    <div class="pw-strength">
                        <!--div class="pw-strength__bar pw-strength__bar--weak" id="J-pw-strength__bar"></div-->
                        <div class="pw-strength__bar pw-strength__bar--normal" id="J-pw-strength__bar"></div>
                        <!--div class="pw-strength__bar pw-strength__bar--strong" id="J-pw-strength__bar"></div-->
                        <div class="pw-strength__letter"> <span class="pw-strength__label">弱</span> <span class="pw-strength__label">中</span> <span class="pw-strength__label pw-strength__label--noborder">强</span> </div>
                    </div>
                    <label>创建密码</label>
                    <input type="password" name="password" class="f-text J-pwd">
                    <span class="inline-tip"><i class="tip-status tip-status--success"></i></span> </div>
                <div class="form-field form-field--pwd2">
                    <label>确认密码</label>
                    <input type="password" name="password2" class="f-text J-pwd2">
                </div>
                <div class="form-field">
                    <input type="submit" class="btn" value="同意以下协议并注册">
                </div>
                <div class="field-group"><a class="f1" href="" target="_blank">《用户协议》</a> </div>
            </form>
        </div>
    </div>
<include file="Public:footer"/>
<script type="text/javascript">
    $(function() {
        $('#signup_header ul li').click(function() {
            var selector = '';
            cur_selector = $(this).find('a').attr('href');
            $('#signup_header ul li').each(function() {
                var se = $(this).find('a').attr('href');
                if (se == cur_selector) {
                    $(this).addClass('cur');
                    return;
                } else {
                    $(this).removeClass('cur');
                    selector = se;
                }
            })

            $(selector).hide();
            $(cur_selector).show();
            return false;
        })
    });
    //发送手机验证码
    function get_code(obj) {
		var status = $(obj).attr("status");
		if(status == 1){
			return false;
		}else{
			$(obj).attr("status",'1');		
		}
		var mobile = $.trim($('#mobile').val());
		var messblock = $('#J-verify-tip');
		messblock.html("正在获取...");
		$.ajax({
			type: 'POST',
			url: '{:U('Reg/getMobileVerifyCode')}',
			data: {'mobile':mobile},
			async: false,
			dataType: 'json',
			error:function (XMLHttpRequest, textStatus, errorThrown) {
				alert(errorThrown);
					this; // 调用本次AJAX请求时传递的options参数
			},
			success: function(data){
				if(data.status == 1){
					Reget=setInterval("fnReget()",1000);
				} else {
					$('#J-verify-tip').attr('s','120');
					$('#J-verify-tip').html(data.message);
					$('#messages_status').attr('status', "0");
				}
			}				
		});			
	}
	function fnReget(){
		var btnval=	$('#J-verify-tip').attr('s');	
		if(btnval==0){
			clearInterval(Reget);	
			$('#J-verify-tip').attr('s','120');
			$("#messages_status").attr('status','0');	
			$('#J-verify-tip').html('重新获取');
		}else{	
			btnval--;	
			$('#J-verify-tip').html(btnval+'秒后重新获取');		
			$('#J-verify-tip').attr('s',btnval);
		}
	}	
</script>
</html>
